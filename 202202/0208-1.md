# useEffect ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í•´ê²°

* [ë¬¸ì œ ì›ì¸ê³¼ í•´ê²° ë°©ì•ˆ](#ë¬¸ì œ-ì›ì¸ê³¼-í•´ê²°-ë°©ì•ˆ)
* [ìž‘ì„± ì½”ë“œ](#ìž‘ì„±-ì½”ë“œ)

### ë¬¸ì œ ì›ì¸ê³¼ í•´ê²° ë°©ì•ˆ

* ë¬¸ì œ

ì €ì¶•ë°©ì—ì„œ ë‹¤ë¥¸ íŽ˜ì´ì§€ë¡œ ì´ë™í•  ë•Œ Memory leak ê²½ê³ ê°€ ë°œìƒ

* ì›ì¸

ì €ì¶•ë°© ì»´í¬ë„ŒíŠ¸ëŠ” í•„í„°ë§ í‚¤ì›Œë“œê°€ ë³€í•  ë•Œë§ˆë‹¤ useEffect í›…ì„ í†µí•´ API ìž¬ìš”ì²­ì„ í•œë‹¤. useEffect í›…ì˜ ì˜ì¡´ì„± ë°°ì—´ì— íŠ¹ì • ê°’ì´ ìžˆë‹¤ë©´ ì–¸ë§ˆìš´íŠ¸ê°€ ëì„ ë•Œë„ ì‹¤í–‰ë¼ì„œ stateë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤. ë”°ë¼ì„œ, í•„í„°ë§ í‚¤ì›Œë“œ ê°’ì´ ë³€ê²½ë˜ê¸° ì§ì „ì— í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ë’·ì •ë¦¬ ìž‘ì—…ì„ í•´ì¤˜ì•¼ í•œë‹¤.

* í•´ê²°ë°©ì•ˆ

1. isCleanUp ë³€ìˆ˜ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ë³€ìˆ˜ê°€ trueì¼ ë•Œë§Œ api ìš”ì²­í•˜ë„ë¡ ìˆ˜í–‰
2. í´ë¦°ì—… í•¨ìˆ˜ë¥¼ í†µí•´ ë³€ìˆ˜ì— false ê°’ì„ í• ë‹¹

### ìž‘ì„± ì½”ë“œ

* ì´ì „ ì½”ë“œðŸ’©

```javascript
const handleHistoryData = async () => {
  const { data } = await axiosInstance.get(
    `/api/v1/users/challenges/${id}/saving-histories?period=${option.period}&ordering=${option.order}`
  );
  setFilteredData(data.data.saving_history);
};

useEffect(() => {
  handleHistoryData();
}, [option]);
```

* ë³€ê²½ ì½”ë“œâœ¨

```javascript
let isCleanUp = true;

const handleHistoryData = async () => {
  const { data } = await axiosInstance.get(
    `/api/v1/users/challenges/${id}/saving-histories?period=${option.period}&ordering=${option.order}`
  );
  if (isCleanUp) setFilteredData(data.data.saving_history);
};

useEffect(() => {
  handleHistoryData();
  return () => (isCleanUp = false);
}, [option]);
```
