# utils í•¨ìˆ˜ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ êµì²´

* [ë¦¬íŒ©í† ë§ ì´ìœ ](#ë¦¬íŒ©í† ë§-ì´ìœ )
* [ì‘ì„± ì½”ë“œ](#ì‘ì„±-ì½”ë“œ)

### ë¦¬íŒ©í† ë§ ì´ìœ 

ì´ì „ì— api ìš”ì²­ ë¡œì§, ë¬¸ìì—´ ì •ê·œ í‘œí˜„ì‹ì„ util ë””ë ‰í† ë¦¬ì— ì •ë¦¬í•´ë†“ì•˜ë‹¤.
ë‹¤ì‹œ ì½”ë“œë¥¼ ë³´ë˜ ì¤‘ utilsë¼ëŠ” ë””ë ‰í† ë¦¬ì˜ ì„±ê²©ì´ ëª¨í˜¸í•´ì¡Œê³ , ë¹„ìŠ·í•œ ê¸°ëŠ¥ì˜ í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ì— ë‹´ì•„ë†“ì€ ê²ƒì„ ë°œê²¬í–ˆë‹¤.
**ê²°êµ­ ì½”ë“œë¥¼ ë¶„ë¦¬í•´ë†“ì€ ì˜ë¯¸ê°€ ì—†ì–´ì§„ ê²ƒì´ë‹¤.**

ë”°ë¼ì„œ, ë°˜ë³µí•´ì„œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ë“¤ì€ ì˜ë¯¸ê°€ ì¢€ ë” ëª…í™•í•´ì§€ëŠ” Reactì˜ Custom hookì„ í™œìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.
ì»¤ìŠ¤í…€ í›…ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•  í•„ìš”ê°€ ì¤„ì–´ë“¤ì—ˆê¸° ë•Œë¬¸ì— ì½”ë“œë„ ë” ê¹”ë”í•´ì§€ê³  ëª…í™•í•´ì§„ ëŠë‚Œì„ ë°›ì„ ìˆ˜ ìˆì—ˆë‹¤.

### ì‘ì„± ì½”ë“œ

* ì´ì „ ì½”ë“œğŸ’©

```javascript
// utils/callApi.js
export const connectChallengeApi = async (challengeName, dataPage) => {
  try {
    switch (challengeName) {
      case "participate":
        const { data } = await axios.get(
          "../../modules/participatingChallenge.json"
        );
        return data.data;
       ...
      default:
        throw Error;
    }
  } catch (error) {
    throw Error;
  }
};

// utils/regex.js
export const showMoreTitle = (challengeName) => {
  switch (challengeName) {
    case "participate":
      const join = "ì°¸ì—¬ì¤‘ì¸ ì±Œë¦°ì§€";
      return join;
    case "popular":
      const popluar = "ì¸ê¸° ì±Œë¦°ì§€";
      return popluar;
    case "particular":
      const similar = "ë‚˜ì™€ ë¹„ìŠ·í•œ ì‚¬ëŒë“¤ ì±Œë¦°ì§€";
      return similar;
    case "all":
      const all = "ì „ì²´ ì±Œë¦°ì§€";
      return all;
    default:
      throw Error;
  }
};

// MoreShowList.jsx
useEffect(() => {
	async () => {
	  const { challenges } = await connectChallengeApi(name, page);
	  const title = showMoreTitle(name);
  setChallengeData(challenges);
  setChallengeName(title);
 }
}, []);
```

* ë³€ê²½ ì½”ë“œâœ¨

```javascript
// hooks/useChallengeAPI.jsx
import React, { useState, useEffect } from "react";
import { axiosInstance } from "./TokenApi";

const useChallengeApi = (challengeName, nextPage) => {
  const [challengeData, setChallengeData] = useState([]);

  const getCallApi = () => {
    switch (challengeName) {
      case "participate":
        axiosInstance
          .get(`/api/v1/users/my-challenges?page=${nextPage}`)
          .then((res) => {
            setChallengeData([...challengeData, ...res.data.data]);
          });
        break;
      case "popular":
        axiosInstance
          .get(`/api/v1/auth/challenges?criteria=popularity&page=${nextPage}`)
          .then((res) => {
            setChallengeData([...challengeData, ...res.data.data]);
          });
        break;
      case "deadline":
        axiosInstance
          .get(`/api/v1/auth/challenges?criteria=deadline&page=${nextPage}`)
          .then((res) => {
            setChallengeData([...challengeData, ...res.data.data]);
          });
        break;
      case "all":
        axiosInstance
          .get(`/api/v1/auth/challenges?criteria=valid&page=${nextPage}`)
          .then((res) => {
            setChallengeData([...challengeData, ...res.data.data]);
          });
        break;
      default:
        throw Error;
    }
  };

  useEffect(() => {
    getCallApi();
    return () => getCallApi();
  }, [nextPage]);

  return challengeData;
};

export default useChallengeApi;

// MoreShowList.jsx
const MoreShowTemplate = () => {
  const [hasMore, setHasMore] = useState(true);
  const [page, setPage] = useState(0);

  const {
    params: { name },
  } = useMatch("/moreshow/:name");

  const data = useChallengeApi(name, page);
  const category = useCategory(name);

  const handleScrollPage = () => {
    setPage((page) => page + 1);
    if (data.length === 0) setHasMore((hasMore) => !hasMore);
  };

  return (
    <MoreShowContainer>
		...
    </MoreShowContainer>
  );
};
```
